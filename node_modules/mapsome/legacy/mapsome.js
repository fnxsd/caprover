'use strict';

var id = function id(a) {
    return a;
};

module.exports = function (map, condition, array) {
    if (!array) {
        array = condition;
        condition = id;
    }

    check(map, condition, array);

    var n = array.length;
    var i = n + 1;

    while (--i) {
        var current = n - i;
        var result = map(array[current], i, array);

        if (condition(result)) return result;
    }
};

function check(map, condition, array) {
    if (typeof map !== 'function') throw Error('map should be a function!');

    if (typeof condition !== 'function') throw Error('condition should be a function!');

    if (!Array.isArray(array)) throw Error('array should be an array!');
}